I"º`<h1 id="vista-general-del-code-editor">Vista general del Code Editor</h1>

<p>GEE tiene un entorno de desarrollo integrado (IDE) llamado Editor de c√≥digo. El Editor de c√≥digo tiene varias caracter√≠sticas para ayudar a hacer m√°s f√°cil la programaci√≥n en este entorno que exploraremos en este tutorial. Para una descripci√≥n exhaustiva, v√©ase el <a href="https://developers.google.com/earth-engine/playground#api-reference-docs-tab" target="_blank">Earth Engine Code Editor help page</a> en las gu√≠as de usuario de GEE.</p>

<p>Enlace al c√≥digo completo que usamos en esta lecci√≥n:
<a href="https://code.earthengine.google.com/926160c96272a205b91b5ed7b68981ab" target="_blank">https://code.earthengine.google.com/926160c96272a205b91b5ed7b68981ab</a></p>

<h1 id="ejercicios-explorando-el-code-editor">Ejercicios: Explorando el Code Editor</h1>

<h2 id="1-para-empezar">1. Para empezar</h2>

<p><strong>Para acceder al Code Editor, escribe la siguiente url en tu navegador: <a href="https://code.earthengine.google.com" target="_blank">https://code.earthengine.google.com</a></strong>. Deber√≠a aparecer una interfaz de programaci√≥n web como la siguiente. El siguiente diagrama tiene anotaciones que apuntan a muchas de las funcionalidades que cubriremos hoy.</p>

<p><br />
<img src="../fig/02_codeeditor.png" border="10" />
<br /><br /></p>

<h4 id="la-ventana-del-javascript-code-editor">La ventana del JavaScript Code Editor</h4>

<p>El c√≥digo Javascript est√° escrito en esta ventana. El editor tambi√©n tiene algunas funciones de ayuda, incluyendo autocompletar para las funciones GEE, autocompletar para los par√©ntesis, etc. y algunas sugerencias b√°sicas de subrayado y sintaxis.</p>

<p>Por ejemplo, puedes escribir comentarios usando una doble barra. Escriba lo siguiente en su editor y haga clic en el bot√≥n ‚ÄúRun‚Äù.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// This is just a comment.</span></code></pre></figure>

<h4 id="la-pesta√±a-de-la-consola">La pesta√±a de la consola</h4>

<p>Tambi√©n se puede usar <code class="language-plaintext highlighter-rouge">print()</code> para mostrar los objetos en la consola. Escriba esto y haga clic en ‚ÄúRun‚Äù:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Print something to the console</span>
<span class="nx">print</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hola Mundo!</span><span class="dl">"</span><span class="p">);</span></code></pre></figure>

<h4 id="sugerencia-autom√°tica">Sugerencia autom√°tica</h4>

<p>El editor marcar√° las declaraciones como incompletas <strong><code class="language-plaintext highlighter-rouge">i</code></strong> si escribes sin un punto y coma al final. Puedes controlar estas sugerencias yendo a la peque√±a rueda gris en la parte superior derecha de la p√°gina y activ√°ndola o desactiv√°ndola.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">print</span><span class="p">(</span><span class="dl">"</span><span class="s2">Hola Mundo!</span><span class="dl">"</span><span class="p">);</span></code></pre></figure>

<p><br /></p>

<h2 id="2-guardar-y-compartir-scripts">2. Guardar y compartir Scripts</h2>

<h4 id="guardando-scripts">Guardando Scripts</h4>

<p>Guarde los scripts haciendo clic en el bot√≥n <strong>Save</strong>. Para incluir un mensaje de confirmaci√≥n, usar la flecha desplegable y selecciona ‚ÄúSave with a description‚Äù.  Los mensajes se almacenan en el historial de revisiones de cada gui√≥n guardado.</p>

<p><br />
<img src="../fig/02_getlink.png" border="10" width="75%" height="75%" />
<br /><br /></p>

<p><em>Note: Si no hiciste ning√∫n cambio en el script, el bot√≥n</em> <strong>Save</strong> <em>se oscurecer√°.</em></p>

<p>If you look at the top left panel, you can see the script is now saved in your <strong>Scripts</strong> manager. You have three categories of scripts: private, shared and examples. Each script is backed up on Git. If you move your mouse over the name of the script, three icons will pop up that allow you to revert to older versions, rename or delete the script. You can also make folders and click and drags scripts into those directories.
Si se observa en el panel superior izquierdo, se podr√° ver que el script est√° ahora guardado en tu gestor de <strong>Scripts</strong>. Tienes tres categor√≠as de scripts: privado, compartido y ejemplos. Cada script est√° respaldado en Git. Si pasas el rat√≥n por encima del nombre del script, aparecer√°n tres iconos que te permitir√°n volver a versiones anteriores, renombrar o eliminar el script. Tambi√©n puedes crear carpetas y hacer clic y arrastrar los guiones a esos directorios.</p>

<p><em>Nota/advertencia: Si cambias el nombre de un gui√≥n, su historial de revisiones desaparece.</em></p>

<h4 id="compartiendo-scripts">Compartiendo Scripts</h4>
<p>You can share a static version of scripts by clicking <strong>Get Link</strong>. A url will appear in your browser address field. Share this link to give other people access to your code <em>as it is.</em> If you continue to make edits on this code, they will not update in the linked version. This option is useful to share examples and code snapshots with others.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>**Hot Tip: When posted on the help forum, ALWAYS include a link to your code so people can help troubleshoot. Be sure all personal assets you use are publicly shared so the script will run for others.**
</code></pre></div></div>

<h4 id="√∫nete-al-repositorio-compartido">√önete al repositorio compartido</h4>

<p>To collaborate interactively on shared scripts with other users, you can create a shared folder, invite your collaborators and place scripts in that folder. We have created a shared folder for geohackweek2019.</p>

<p>You should have already accessed the shared code repository in the Code Editor with the following steps:</p>

<ul>
  <li>Join our Google group to access the shared code repository by clicking this link <a href="https://goo.gl/maZwVa">https://goo.gl/maZwVa</a>. Don‚Äôt worry about posting permissions; we won‚Äôt  be posting anything.</li>
  <li>
    <p>Accept the shared repository by clicking this link: <a href="https://code.earthengine.google.com/?accept_repo=users/victorialy/geohackweek2019" target="_blank">https://code.earthengine.google.com/?accept_repo=users/victorialy/geohackweek2019</a></p>
  </li>
  <li>In the code editor, go to the <strong>Scripts tab</strong> in the top left panel, scroll down and expand the ‚ÄúShared‚Äù section. A directory called <em>geohackweek2019</em> should appear with read-only versions of the full scripts from each episode.</li>
</ul>

<p>Any updates will be reflected in these versions of the code. Like all GEE scripts, these are version controlled. Read or write permissions for individuals or groups can be set in the Code Editor using the little grey share icon that appears to the right if you move your mouse over the directory name in the <em>Scripts</em> tab. You should have read-only access to this repo.</p>

<p><br /></p>

<h2 id="3-accediendo-a-la-datasets-de-googles-cloud">3. Accediendo a la Datasets de Google‚Äôs Cloud</h2>

<h4 id="barra-de-herramientas-de-b√∫squeda-encontrar-una-dataset-y-cargarla-como-imagecollections">Barra de herramientas de b√∫squeda: Encontrar una dataset y cargarla como <code class="language-plaintext highlighter-rouge">ImageCollections</code></h4>

<p>To query the <a href="https://code.earthengine.google.com/datasets/" target="_blank">GEE data catalog</a>, you can enter key words into the search toolbar at the top of the code editor.</p>

<p>For practice, let‚Äôs load some imagery into the code editor. We are going to search for and import the <strong>Landsat Top of the Atmosphere (TOA) Reflectance Collection 1 Tier 1</strong> product.</p>
<ul>
  <li>To do this, go to the <em>Search</em> toolbar and type in <strong>Landsat 8 tier 1 TOA</strong>.</li>
  <li>Select the dataset - USGS Landsat 8 Collection 1 Tier 1 TOA Reflectance - by clicking on the name. This will bring up the metadata for this data collection. You can confirm you got the correct one because the <code class="language-plaintext highlighter-rouge">ImageCollection ID</code> should say <strong>LANDSAT/LC08/C01/T1_TOA</strong></li>
  <li>Now, click <strong>Import</strong> in this pop out. A new variable (<code class="language-plaintext highlighter-rouge">ImageCollection</code>) will load into your Code Editor in the ‚ÄúImports‚Äù pane at the top of the code editor.</li>
  <li>Rename this object ‚ÄúL8_TOA‚Äù. This object is an <code class="language-plaintext highlighter-rouge">ImageCollection</code>, which means it is a stack of images. Notice we have to declare this object using <em>var</em>. If you click the little blue square icon above the collection, a pop-out will appear showing the code you just created.</li>
</ul>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">landsat8Collection</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nx">ImageCollection</span><span class="p">(</span><span class="dl">"</span><span class="s2">LANDSAT/LC08/C01/T1_TOA</span><span class="dl">"</span><span class="p">)</span></code></pre></figure>

<p>In order to look at the collection, try to print it just like you did the string.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">print</span><span class="p">(</span><span class="nx">landsat8Collection</span><span class="p">);</span></code></pre></figure>

<p><strong>¬øQu√© ocurre?</strong></p>

<p>Earth Engine times out - this means your request is too big, which makes sense as there are thousands of images in the Landsat 8 collection. To get around this, try the following:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">print</span><span class="p">(</span><span class="nx">landsat8Collection</span><span class="p">.</span><span class="nx">limit</span><span class="p">(</span><span class="mi">5</span><span class="p">))</span></code></pre></figure>

<p>This will show you just the first five images so you can preview the collection. You can see the collection ID, the bands, the features, which are the images in the collection and the properties, which is the metadata.</p>

<p><em>Note: The developers are always adding great new functionalities to the GUI so we don‚Äôt have to code. As a result, sometimes there will be a point-and-click method to do something that can also be accomplished by writing a line or two of code. The ‚Äòimport‚Äô function is a great example of this because you can import a collection using either the ‚ÄúImport‚Äù button on the metadata or the ‚ÄòImageCollection‚Äô command written in JavaScript. Same thing, two ways.</em></p>

<h4 id="seleccionar-un-√°rea-de-estudio-usando-la-herramienta-geometry">Seleccionar un √°rea de estudio usando la herramienta Geometry</h4>

<p>The geometry drawing tools located on the upper left side of the map viewer can be used to manually create points, line or polygons. We are now going to define a study area using a point we select on the map. We will use the <strong>Geometry Tools</strong> to create that point.</p>

<ol>
  <li>Type ‚ÄúLake Powell, AZ‚Äù into the search toolbar and hit enter. This will zoom you to Lake Powell in Arizona, USA.</li>
  <li>On the left side of the map, click the little marker icon. Your cursor should then turn into crosshairs.</li>
  <li>Toggle around the map and drop the pin in the center of the lake, which is right next to Lee Vining.</li>
  <li>Now, go to the Geometry Imports window that has now appeared. In that window, name the point ‚Äúroi‚Äù and change the dropdown from <strong>Geometry</strong> to <strong>FeatureCollection</strong>.</li>
</ol>

<p>You have now created a new point object and cast it as a <code class="language-plaintext highlighter-rouge">FeatureCollection</code>. You can now use this  <code class="language-plaintext highlighter-rouge">FeatureCollection</code> as a way to geographically filter datasets for just your region.</p>

<p><br />
<img src="../fig/02_lakePowell.png" border="10" />
<br /><br /></p>

<p>Having fun? You can further explore how to configure geometries in the <a href="https://geohackweek.github.io/GoogleEarthEngine/05-classify-imagery/" target="_blank">Classifying Imagery</a> section of this tutorial.</p>

<h4 id="filtrar-la-image-collection">Filtrar la Image Collection</h4>

<p>One of the major benefits of the JavaScript versus Python API is the ability to quickly render on-the-fly geovisualizations of your imagery and outputs. We are now going to visualize one image from the Landsat 8 collection.</p>

<p>We are going to filter the collection down to one image by:</p>

<ul>
  <li>filtering it to our study area we defined with a point</li>
  <li>filtering it down to just one year of images (2018)</li>
  <li>sorting the images by the overall cloud cover (least cloudy to most cloudy)</li>
  <li>picking the top image (least cloudy)</li>
</ul>

<p>Essentially, this allows us to sort through the full Landsat 8 collection and load the best image available for our region of interest for 2018.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// Load Landsat 8 input imagery</span>
<span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="nx">ee</span><span class="p">.</span><span class="nx">Image</span><span class="p">((</span><span class="nx">landsat8Collection</span><span class="p">)</span>
    <span class="c1">// Filter to get only images under the region of interest.</span>
    <span class="p">.</span><span class="nx">filterBounds</span><span class="p">(</span><span class="nx">lakePowell</span><span class="p">)</span>
    <span class="c1">// Filter to get only one year of images.</span>
    <span class="p">.</span><span class="nx">filterDate</span><span class="p">(</span><span class="dl">'</span><span class="s1">2018-01-01</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">2018-12-31</span><span class="dl">'</span><span class="p">)</span>
    <span class="c1">// Select just the optical bands</span>
    <span class="p">.</span><span class="nx">select</span><span class="p">([</span><span class="dl">'</span><span class="s1">B[1-7]</span><span class="dl">'</span><span class="p">])</span>
    <span class="c1">// Sort by scene cloudiness, ascending.</span>
    <span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="dl">'</span><span class="s1">CLOUD_COVER</span><span class="dl">'</span><span class="p">)</span>
    <span class="c1">// Get the first (least cloudy) scene.</span>
    <span class="p">.</span><span class="nx">first</span><span class="p">());</span></code></pre></figure>

<p>Use a print statement to check out what we just made:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">print</span><span class="p">(</span><span class="nx">image</span><span class="p">,</span> <span class="dl">'</span><span class="s1">Lake Powell L8 image</span><span class="dl">'</span><span class="p">)</span></code></pre></figure>

<p>We have now filtered the ENTIRE Landsat 8 archive down to the least cloudy image for our study area in 2018. However, we still need to visualize it, which we will do using the <code class="language-plaintext highlighter-rouge">Map.addLayer</code> function.</p>

<p><em>Note: Not sure what this function does? Search for it in the</em> <strong>Docs</strong> <em>tab to learn the arguments.</em></p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">image</span><span class="p">,{},</span>  <span class="dl">'</span><span class="s1">L8 Image</span><span class="dl">'</span><span class="p">);</span></code></pre></figure>

<h4 id="gestionar-las-capas">Gestionar las capas</h4>

<p>That doesn‚Äôt look so great. Let‚Äôs actually define what bands to use and fill in some other visualization parameters using the layer manager. We will use reflectance in the visible range from the red (Band 4), the green (Band 3) and the blue (Band 2) to make a true color image.  We can use prior knowledge to make a nice image:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">Map</span><span class="p">.</span><span class="nx">addLayer</span><span class="p">(</span><span class="nx">image</span><span class="p">,</span> <span class="p">{</span><span class="na">bands</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">B4</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">B3</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">B2</span><span class="dl">'</span><span class="p">],</span> <span class="na">max</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">,</span> <span class="na">gamma</span><span class="p">:</span> <span class="mi">2</span><span class="p">},</span> <span class="dl">'</span><span class="s1">Better L8 Image</span><span class="dl">'</span><span class="p">);</span></code></pre></figure>

<p>More often then not, though, you may not know the optimal min, max and stretch. This is why they added the <strong>Layer Manager</strong> tool which can be found in the upper right hand corner of the map. This toolbar will allow you to click layers on and off as well as adjust their transparency and interactively configure each layer‚Äôs visualization parameters. You can use this tool to figure out what parameters to pass to the <code class="language-plaintext highlighter-rouge">Map.addLayer</code>.</p>

<p><br />
<img src="../fig/02_layermanager.png" border="10" />
<br /><br /></p>

<p>You can also toggle between the <strong>Map</strong> or <strong>Satellite</strong> buttons in the top right of the map panel to change the baselayer.</p>

<p>For more on image visualization, see the <a href="https://developers.google.com/earth-engine/image_visualization" target="_blank">GEE Visualization Guide</a> or the <a href="https://developers.google.com/earth-engine/tutorial_api_02" target="_blank">GEE Visualization tutorial</a></p>

<h4 id="la-pesta√±a-inspector">La pesta√±a Inspector</h4>

<p>Another way you can inspect and explore your image is through the inspector tool. The Inspector console allows you to interactively query the map. If you have imagery loaded, it will give you information about that imagery at the point you clicked as well.</p>

<p>In the upper right, switch to the <strong>Inspector</strong> tab and click on the map where there is land. Now click where there is water. Toggle the between the graph and the list of values.</p>

<h2 id="comencemos-a-jugar">COMENCEMOS A JUGAR</h2>

<p>On your own, play with the stretch parameters and use the Inspector to explore the map, clicking between land, bare earth, forest and water.</p>

<p>If you already did that, you can play with dropping the point somewhere else and looking at a different image of your favorite place.</p>

<p>You could also change the dates to look at a winter time image and see how the reflectance changes when there is snow on the ground.</p>

<h2 id="4-conseguir-ayuda">4. Conseguir ayuda</h2>

<p>There are many entry points for getting help tucked into the Code Editor. Familiarizing yourself with these tools can help soften the learning curve.</p>

<h4 id="referencia-api-pesta√±a-docs">Referencia API (pesta√±a Docs)</h4>

<p>Next to the <strong>Scripts</strong> tab is the <strong>Docs</strong> tab, which has the complete, searchable JavaScript API documentation for every function and call. The documentation is organized by GEE data type. Each data type has a specific set of functions that can be applied to it.</p>

<h4 id="el-bot√≥n-help">El bot√≥n Help</h4>

<p>The <strong>Help</strong> button is a gateway to many resources, including links to:</p>

<ul>
  <li>
    <p>the <a href="https://developers.google.com/earth-engine/" target="_blank"><strong>Developers Guide</strong></a>
for official GEE tutorials, reference and guides. This is the first place I go when I need to look up how to write some code.</p>
  </li>
  <li>
    <p>the <strong>Help Forum</strong> where you can post questions and get answers. If I can‚Äôt find a guide for my specific question on the GEE Guides, I then go search for key words from my problem/question on the forum. Since people share links to their codes, you can often find great examples of solutions here.</p>
  </li>
  <li>
    <p><a href="https://developers.google.com/earth-engine/tutorials" target="_blank">Existing tutorials</a> and the <a href="https://developers.google.com/earth-engine/edu" target="_blank">Earth Engine for Higher Education resources</a> written by the GEE team and others (even some in Japanese!)</p>
  </li>
  <li>
    <p>A list of keyboard shortcuts</p>
  </li>
  <li>
    <p>links to the <strong>Suggest a Dataset</strong> page</p>
  </li>
</ul>

<h4 id="ejemplos-en-el-shared-scripts">Ejemplos en el <strong>Shared Scripts</strong></h4>

<p>A final place you can get help is by scrolling down and looking at the examples housed in the <strong>Shared Scripts</strong> in the <strong>Scripts</strong> tab.</p>

<p><br /></p>

<h2 id="5-importar-y-exportar-sus-propios-assets">5. Importar y exportar sus propios Assets</h2>

<h4 id="importar-im√°genes-y-archivos-vectoriales">Importar im√°genes y archivos vectoriales</h4>
<p>Besides using all of Google‚Äôs amazing archives, users can also import their own data as either images (rasters) or tables (vectors). The <strong>Assets</strong> tab on the left is where you can import, share and manage these own assets. You can upload images or tables (vector data) here.</p>

<p>When posting on the forum, make sure you check the ‚ÄúAnyone Can Read‚Äù box on the sharing assets pop-out so folks on the forum can all run your code. If you have a private asset and you don‚Äôt make it public, other people will not be able to run your code. If you don‚Äôt want to share your private data, you can create a dummy example to share on the forums using hand drawn points or polygons.</p>

<p><br />
<img src="../fig/02_sharingassets.png" border="10" />
<br /><br /></p>

<p>For an example script that uses imported data, see <a href="https://geohackweek.github.io/GoogleEarthEngine/06-time-series/" target="_blank">Episode 06 Time Series</a>. For detailed instructions from Google on uploading, sharing and managing assets, see the <a href="https://developers.google.com/earth-engine/asset_manager" target="_blank">Assets Manager page</a> on the GEE website .</p>

<h4 id="exportando-y-la-pesta√±a-tasks">Exportando y la pesta√±a Tasks</h4>
<p>Instead of printing to the console, for larger tasks you may want to just export the outputs to your Google Drive or Cloud Storage using the <code class="language-plaintext highlighter-rouge">Export</code> functions in your code. When run, these generate a new task in the <code class="language-plaintext highlighter-rouge">Task</code> tab in the upper right panel. You will need to then ‚ÄúRun‚Äù this task in order to actually start the export. Once you start an export task, you will be prompted to enter details about the resolution, size, format and destination if you did not include this in your code. You can hover your mouse over the task and click the ‚Äú?‚Äù icon to see the status and also to get the task number. If your task isn‚Äôt executing, you can share this number as a reference on the developers forum.</p>

<p>We will do an example table export in <a href="https://geohackweek.github.io/GoogleEarthEngine/03-load-imagery/" target="_blank">Episode 3: Load Imagery</a> of this tutorial.</p>

<p>For detailed instructions on exports, see the <a href="https://developers.google.com/earth-engine/exporting" target="_blank">Exporting Data page</a> on the GEE website. We will also have small export examples in subsequent modules of this tutorial.</p>

<p><br />
<br /></p>

<h3 id="divi√©rtete-con-el-code-editor">Divi√©rtete con el code editor!!!</h3>
:ET